{
  "$schema": "https://opencode.ai/config.json",
  "provider": {
    "LocalAI": {
      "npm": "@ai-sdk/openai-compatible",
      "name": "LocalAI",
      "options": {
        "baseURL": "http://127.0.0.1:11451/v1"
      },
      "models": {
        "qwen3.5-flash": {
          "name": "qwen3.5-flash",
          "modalities": {
            "input": ["text", "image"],
            "output": ["text"]
          },
          "limit": {
            "context": 131072,
            "output": 32768
          }
        },
        "qwen3-coder-next": {
          "name": "qwen3-coder-next",
          "limit": {
            "context": 131072,
            "output": 65536
          }
        },
        "qwen3.5-plus": {
          "name": "qwen3.5-plus",
          "modalities": {
            "input": ["text", "image"],
            "output": ["text"]
          },
          "limit": {
            "context": 131072,
            "output": 32768
          }
        },
        "qwen3.5-plus-instruct": {
          "name": "qwen3.5-plus-instruct",
          "modalities": {
            "input": ["text", "image"],
            "output": ["text"]
          },
          "limit": {
            "context": 131072,
            "output": 32768
          }
        }
      }
    }
  },
  // 插件
  "plugin": [
    "file:///usr/lib/opencode/plugins/opencode-notifier", // 需安装 opencode-notifier
    "file:///usr/lib/opencode/plugins/opencode-md-table-formatter" // 自动格式化 md 表格
  ],
  // 默认 agent
  "default_agent": "copilot",
  // mcp server
  "mcp": {},
  // TUI 界面设置
  "tui": {
    "scroll_speed": 3,
    "scroll_acceleration": {
      "enabled": true
    },
    "diff_style": "auto"
  },
  "theme": "system",
  // 工具使用权限
  "permission": {
    "bash": "ask",
    "edit": "ask",
    "read": "allow",
    "grep": "allow",
    "glob": "allow",
    "list": "allow",
    "lsp": "allow",
    "skill": "allow",
    "task": "ask",
    "todoread": "allow",
    "todowrite": "allow",
    "webfetch": "allow",
    "websearch": "allow",
    "question": "allow"
  },
  // 禁用自动更新, 仅从 AUR 更新
  "autoupdate": false,
  // 上下文自动压缩
  "compaction": {
    "auto": true,
    "prune": true,
    "reserved": 16384
  },
  // 忽略常变动的目录
  "watcher": {
    "ignore": [
      "node_modules/**",
      "dist/**",
      ".git/**"
    ]
  },
  "agent": {
    "copilot": {
      "permission": {
        "bash": "ask",
        "codesearch": "deny",
        "edit": "deny",
        "read": "allow",
        "grep": "allow",
        "glob": "deny",
        "list": "deny", // 基本触发不成功, 被 `ls` 遮盖了
        "lsp": "deny",
        "skill": "allow",
        "task": "deny",
        "todoread": "allow",
        "todowrite": "allow",
        "webfetch": "allow",
        "websearch": "deny",
        "write": "deny",
        "question": "allow"
      }
    },
    "marxist": {
      "permission": {
        "bash": "deny",
        "codesearch": "deny",
        "edit": "deny",
        "read": "deny",
        "grep": "deny",
        "glob": "deny",
        "list": "deny",
        "lsp": "deny",
        "skill": "deny",
        "task": "deny",
        "todoread": "deny",
        "todowrite": "deny",
        "webfetch": "allow",
        "websearch": "deny",
        "question": "deny"
      }
    },
    "slidev": {
      "permission": {
        "bash": "ask",
        "edit": "ask",
        "read": "allow",
        "grep": "allow",
        "glob": "allow",
        "list": "allow",
        "lsp": "deny",
        "skill": "allow",
        "todoread": "deny", // 没有必要, todo 这两个东西太占 token 了
        "todowrite": "deny",
        "webfetch": "deny",
        "websearch": "deny",
        "question": "allow"
      }
    },
    // 默认 agent 的提示词写得稀烂
    // 全部禁用
    "build": {
      "disable": true
    },
    "plan": {
      "mode": "primary",
      "disable": true,
      "permission": {
        "skill": "allow"
      }
    }
  }
}